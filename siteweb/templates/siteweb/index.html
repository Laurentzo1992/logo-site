{% extends "base.html" %}

{% load static %}

{% block content %}
 <!-- Services Section -->
 <div id="toast-container" class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1055;"></div>

 <!-- üîä Son de notification -->
 <audio id="toast-sound" src="{% static 'images/alerte/alerte.mp3' %}" preload="auto"></audio>

 
<section id="services" class="py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-center-title">Nos Services</h2>
                <p class="lead">Des solutions adapt√©es √† vos besoins technologiques</p>
            </div>
        </div>
        <div id="services-container" class="row">
             <!-- Les services seront charg√©s dynamiquement ici -->
        </div>
    </div>
</section>

<!-- Features Section -->
<section id="features" class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
              <h2 class="section-center-title">Pourquoi Nous Choisir</h2>
              <p class="lead">Des solutions technologiques adapt√©es aux d√©fis contemporains</p>
            </div>
        </div>
      <div class="row">
          <div class="col-md-4">
              <div class="feature-item">
                  <div class="feature-icon">
                      <i class="fas fa-rocket"></i>
                  </div>
                  <h4>Innovation</h4>
                  <p>Nous int√©grons les derni√®res technologies pour vous offrir des solutions avant-gardistes</p>
              </div>
          </div>
          <div class="col-md-4">
              <div class="feature-item">
                  <div class="feature-icon">
                      <i class="fas fa-lock"></i>
                  </div>
                  <h4>S√©curit√©</h4>
                  <p>Protection maximale de vos donn√©es et syst√®mes avec des protocoles de s√©curit√© avanc√©s</p>
              </div>
          </div>
          <div class="col-md-4">
              <div class="feature-item">
                  <div class="feature-icon">
                      <i class="fas fa-users"></i>
                  </div>
                  <h4>Expertise</h4>
                  <p>Une √©quipe de professionnels qualifi√©s et exp√©riment√©s √† votre service</p>
              </div>
          </div>
        </div>
    </div>
</section>

<!-- Partners Section -->
<section id="partners" class="py-5">
  <div class="container">
      <div class="row">
          <div class="col-12 text-center mb-5">
              <h2 class="section-center-title">Ils Nous Font Confiance</h2>
              <p class="lead">Des partenaires qui s'appuient sur notre expertise au quotidien</p>
          </div>
      </div>
      <div class="row">
          <div class="col-12">
              <!-- Logo Carousel -->
              <div id="partner-carousel" class="carousel slide" data-bs-ride="carousel">
                  <div class="carousel-inner">
                      <!-- First slide with 4 logos -->
                      <div class="carousel-item active">
                          <div class="d-flex justify-content-around align-items-center">
                              <div class="partner-logo">
                                  <img src="{% static 'images/app_static/logo_01.png' %}" alt="Partenaire 1" class="img-fluid">
                              </div>
                              <div class="partner-logo">
                                  <img src="{% static 'images/app_static/logo_01.png' %}" alt="Partenaire 2" class="img-fluid">
                              </div>
                              <div class="partner-logo">
                                  <img src="{% static 'images/app_static/logo_03.png' %}" alt="Partenaire 3" class="img-fluid">
                              </div>
                              <div class="partner-logo">
                                  <img src="{% static 'images/app_static/logo_04.png' %}" alt="Partenaire 4" class="img-fluid">
                              </div>
                          </div>
                      </div>
                      <!-- Second slide with 4 more logos -->
                      <div class="carousel-item">
                          <div class="d-flex justify-content-around align-items-center">
                              <div class="partner-logo">
                                  <img src="{% static 'images/app_static/logo_05.png' %}" alt="Partenaire 5" class="img-fluid">
                              </div>
                              <div class="partner-logo">
                                  <img src="{% static 'images/app_static/logo_06.png' %}" alt="Partenaire 6" class="img-fluid">
                              </div>
                              <div class="partner-logo">
                                  <img src="{% static 'images/app_static/logo_07.png' %}" alt="Partenaire 7" class="img-fluid">
                              </div>
                              <div class="partner-logo">
                                  <img src="{% static 'images/app_static/logo_08.png' %}" alt="Partenaire 8" class="img-fluid">
                              </div>
                          </div>
                      </div>
                  </div>
                  <!-- Carousel controls -->
                  <button class="carousel-control-prev" type="button" data-bs-target="#partner-carousel" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Pr√©c√©dent</span>
                  </button>
                  <button class="carousel-control-next" type="button" data-bs-target="#partner-carousel" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Suivant</span>
                  </button>
              </div>
          </div>
      </div>
  </div>
</section>

<!-- About Section -->

<section id="about" class="py-5">
    <div class="container">
        <div class="row" id="about-container">
            <!-- Contenu inject√© dynamiquement ici -->
        </div>
    </div>
</section>
  
<!-- Contact Section -->
<section id="contact" class="py-5 bg-light">
    <div class="container">
      <div class="row">
          <div class="col-12 text-center mb-5">
              <h2 class="section-center-title">Contactez-Nous</h2>
              <p class="lead">Pr√™t √† transformer votre infrastructure num√©rique? Parlons-en!</p>
          </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <form id ="contact-form">
                  <div class="mb-3">
                      <input type="text" class="form-control" id="nom" name="nom" placeholder="Votre nom" required>
                  </div>
                  <div class="mb-3">
                      <input type="email" class="form-control" id="email" name="email" placeholder="Votre email" required>
                  </div>
                  <div class="mb-3">
                      <input type="tel" class="form-control"  id="telephone" name="telephone" placeholder="Votre t√©l√©phone">
                  </div>
                  <div class="mb-3">
                      <select class="form-select" id="service">
                          <option selected>Service qui vous int√©resse</option>
                          <option>G√©nie Logiciel</option>
                          <option>Num√©risation de Documents</option>
                          <option>R√©seaux et Syst√®mes</option>
                          <option>S√©curit√© Informatique</option>
                          <option>Intelligence Artificielle</option>
                          <option>Formation</option>
                      </select>
                  </div>
                  <div class="mb-3">
                      <textarea class="form-control" rows="5" id="message" name="message" placeholder="Votre message" required></textarea>
                  </div>
                  <button type="submit" class="btn btn-custom">Envoyer le message</button>
                </form>
            </div>
            <div class="col-lg-6">
                <div class="row">
                  <div class="col-md-6">
                    <div class="contact-info text-center">
                      <div class="contact-icon">
                        <i class="fas fa-map-marker-alt"></i>
                      </div>
                      <h5>Notre adresse</h5>
                      <p id="adresse-contact">123 Avenue Exemple, Ville, Pays</p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="contact-info text-center">
                      <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                      </div>
                      <h5>T√©l√©phone</h5>
                      <p id="telephone-contact">+123 456 7890</p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="contact-info text-center">
                      <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                      </div>
                      <h5>Email</h5>
                      <p id="email-contact">contact@logoservices.com</p>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="contact-info text-center">
                      <div class="contact-icon">
                        <i class="fas fa-clock"></i>
                      </div>
                      <h5>Heures d'ouverture</h5>
                      <p id="horaire-contact">Lun-Ven: 9h-18h</p>
                    </div>
                  </div>
                </div>
            </div>              
        </div>
    </div>
</section>



<script>
    document.addEventListener("DOMContentLoaded", function () {
      fetch("/api/services/")
        .then(response => response.json())
        .then(services => {
            //console.log(services);
          const container = document.getElementById("services-container");
  
          services.forEach(service => {
            const col = document.createElement("div");
            col.className = "col-md-4";
  
            col.innerHTML = `
            <div class="services-card text-center">
                <div class="services-icon">
                    <i class="${service.icon}"></i>
                </div>
                <h4>${service.libelle}</h4>
                <p>${service.description}</p>
            </div>
            `;
            container.appendChild(col);
          });
        })
        .catch(error => {
          console.error("Erreur lors du chargement des services :", error);
        });
    });
  </script>


  <script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch('/api/api_about/')
            .then(response => response.json())
            .then(data => {
                const container = document.getElementById("about-container");
    
                data.forEach(item => {
                    const html = `
                        <div class="col-lg-6 about-image">
                            <img src="${item.fichier}" alt="Image partenaire" class="img-fluid">
                        </div>
                        <div class="col-lg-6 about-content">
                            <h2 class="section-title">√Ä Propos de <span class="logo-color-text">Logo Services</span></h2>
                            <p>${item.contenu}</p>
                            <a href="#contact" class="btn btn-custom mt-3">D√©couvrez notre approche</a>
                        </div>
                    `;
                    container.innerHTML += html;
                });
            })
            .catch(error => {
                console.error('Erreur lors du chargement des donn√©es :', error);
            });
    });
    </script> 
    
    

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch('/api/api_contact/')
                .then(response => response.json())
                .then(data => {
                    if (data.length > 0) {
                        const contact = data[0]; // On prend le premier (ou unique) contact
        
                        document.getElementById("adresse-contact").textContent = contact.adresse || "Non disponible";
                        document.getElementById("telephone-contact").textContent = contact.telephone || "Non disponible";
                        document.getElementById("email-contact").textContent = contact.email || "Non disponible";
                        document.getElementById("horaire-contact").textContent = contact.heure_ouverture || "Non disponible";
                    }
                })
                .catch(error => {
                    console.error("Erreur lors du chargement des contacts :", error);
                });
        });
        </script>



        <script>
            function showToast(message, type = 'success') {
                const toastId = 'toast-' + Date.now();
        
                const toastHtml = `
                <div id="${toastId}" class="toast align-items-center text-white bg-${type} border-0 mb-2" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="5000">
                    <div class="d-flex">
                        <div class="toast-body">
                            ${message}
                        </div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Fermer"></button>
                    </div>
                </div>`;
        
                const container = document.getElementById('toast-container');
                container.insertAdjacentHTML('beforeend', toastHtml);
        
                const toastEl = document.getElementById(toastId);
                const bsToast = new bootstrap.Toast(toastEl);
                bsToast.show();
        
                // üîä Joue le son
                const sound = document.getElementById('toast-sound');
                if (sound) sound.play();
        
                // Optionnel : supprime le toast du DOM apr√®s disparition
                toastEl.addEventListener('hidden.bs.toast', () => toastEl.remove());
            }
        
            document.getElementById('contact-form').addEventListener('submit', function(e) {
                e.preventDefault();
        
                const data = {
                    nom: document.getElementById('nom').value,
                    email: document.getElementById('email').value,
                    telephone: document.getElementById('telephone').value,
                    service: document.getElementById('service').value,
                    message: document.getElementById('message').value,
                };
        
                fetch('/api/send_message/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                })
                .then(response => response.json())
                .then(result => {
                    if (result.success) {
                        showToast(result.message, 'success');
                        document.getElementById('contact-form').reset();
                    } else {
                        showToast("Erreur : " + result.message, 'danger');
                    }
                })
                .catch(error => {
                    showToast("Erreur r√©seau : " + error, 'danger');
                });
            });
        </script>        

{% endblock content %}